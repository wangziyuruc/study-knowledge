**一、领域特定语言（DSL）**

领域特定语言（DSL）通常被定义为一种特别针对某类特殊问题的计算机语言，它不打算解决其领域外的问题。对于DSL的正式研究已经持续很多年，直 到最近，在程序员试图采用最易读并且简炼的方法来解决他们的问题的时候，内部DSL意外地被写入程序中。近来，随着关于Ruby和其他一些动态语言的出 现，程序员对DSL的兴趣越来越浓。这些结构松散的语言给DSL提供某种方法，使得DSL允许最少的语法以及对某种特殊语言最直接的表现。

这里将描述怎样使用Java语言来编写领域特定语 言，并将建议一些组建DSL语言时可采用的模式。

Java适合用来创建内部领域特定语言吗？

在我们审视Java语言是否可以作为创建DSL的工具之前，我们首先需要引进“内部DSL”这个概念。一个内部DSL在由应用软件的主编程语言创 建，对定制编译器和解析器的创建（和维护）都没有任何要求。Martin Fowler曾编写过大量各种类型的DSL，无论是内部的还是外部的，每种类型他都编写过一些不错的例子。但使用像Java这样的语言来创建DSL，他却 仅仅一笔带过。

另外还要着重提出的很重要的一点是，在DSL和API两者间其实很难区分。在内部DSL的例子中，他们本质上几乎是一样的。在联想到DSL这个词汇 的时候，我们其实是在利用主编程语言在有限的范围内创建易读的API。“内部DSL”几乎是一个特定领域内针对特定问题而创建的极具可读性的API的代名 词。

任何内部DSL都受它基础语言的文法结构的限制。比如在使用Java的情况下，大括弧，小括弧和分号的使用是必须的，并且缺少闭包和元编程有可能会导致DSL比使用动态语言创建来的更冗长。

但从光明的一面来看，通过使用Java，我们同时能利用强大且成熟的类似于Eclipse和IntelliJ IDEA的集成开发环境，由于这些集成开发环境“自动完成（auto-complete）”、自动重构（auto-reconstruct）和debug等特性，使得DSL的创建、使用和维护 来的更加简单。另外，Java5中的一些新特性（比如generic、varargs 和static imports）可以帮助我们创建比以往任何版本任何语言都简洁的API。

一般来说，使用Java编写的DSL不会造就一门业务用户可以上手的语言，而会是一种业务用户也会觉得易读的语 言，同时，从程序员的角度，它也会是一种阅读和编写都很直接的语言。和外部DSL或由动态语言编写的DSL相比有优势，那就是编译器可以增强纠错能力并标 识不合适的使用，而Ruby或Pearl会“愉快接受”荒谬的input并在运行时失败。这可以大大减少冗长的测试，并极大地提高应用程序的质量。然而， 以这样的方式利用编译器来提高质量是一门艺术，目前，很多程序员都在为尽力满足编译器而非利用它来创建一种使用语法来增强语义的语言。

利用Java来创建DSL有利有弊。最终，你的业务需求和你所工作的环境将决定这个选择正确与否。

**二、Camel DSL**

Camel使用一种Java领域特定的语言（Domain Specific Language，DSL）来创建企业集成模式（Enterprise Integration Patterns）或路由。Camel同时支持一种基于Spring的 XML 配置，以及 Scala DSL。

    使用Java DSL的优点是你使用的IDE可以在你开始编写时，智能的实例代码，而不需要在大量的XML上浪费时间。Java DSL非常有表现能力，因为你可以在语言中混合搭配你自己的代码，来进行表达式或断言评估，或容易地添加自定义的处理模块。

DSL的主要入口有

CamelContext 用于创建一个Camel 路由规则库（routing rule base）；
RouteBuilder 用于创建路由集合。
参考：

http://camel.apache.org/dsl.html
说明： 这只是简单的概念介绍，详细的请参看 http://www.infoq.com/cn/articles/internal-dsls-java
